<!DOCTYPE html>
<html>
<head>
    <title>Furina Companion</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="static/styles.css">
    <script
        async
        crossorigin="anonymous"
        data-clerk-publishable-key="pk_test_ZGV2b3RlZC1sb2N1c3QtMjIuY2xlcmsuYWNjb3VudHMuZGV2JA"
        src="https://devoted-locust-22.clerk.accounts.dev/npm/@clerk/clerk-js@5/dist/clerk.browser.js"
        type="text/javascript">
    </script>
    <script>
        window.Clerk || (window.Clerk = {});
    </script>
    
    <!-- Night Mode Support -->
    <link rel="stylesheet" href="static/night-mode.css">
    <script src="static/night-mode.js" defer></script> <!--night mode glitch solution pasted in night-mode.js-->
    <script>
        // Apply night mode preference immediately
        (function() {
            const isDarkMode = localStorage.getItem('nightMode') === 'true';
            if (isDarkMode) {
                document.documentElement.classList.add('preload-night-mode');
            }
        })();
    </script>
</head>
<body>
    <!-- Navigation Bar -->
    <div class="navbar">
        <!--<a href="#">Home</a>-->
        <a href="#">Home</a>
        <a href="{{ url_for('counselling') }}">Counselling</a>
        <a href="{{ url_for('breathe') }}">Breathe</a>
        <a href="{{ url_for('about') }}">About Us</a>
        <div id="auth-button"></div>
    </div>

    <h1>FURINA</h1>

    <!-- Chat Container -->
    <div class="chat-container">
        <div class="chat-messages" id="chat-messages">
            <div class="message bot-message">
                Hello! I'm Furina, your mental health companion. How can I help you today?
                <button class="speech-button" onclick="speakText(this.parentNode.textContent)">üîä</button>
            </div>
        </div>

        <!-- Input Field & Buttons -->
        <div class="input-area">
            <textarea id="user-input" placeholder="Type your message here..." rows="2"></textarea>
            <button id="mic-button">üé§</button>
            <button id="send-button">>></button>
        </div>
    </div>

    <!-- Voice Settings Container - Single container with both controls -->
    <div class="voice-container">
        <!-- Auto Speak Toggle -->
        <div class="auto-speak-container">
            <input type="checkbox" id="auto-tts" /> 
            <label for="auto-tts">Auto Speak</label>
        </div>
        
        <!-- Voice Selector will be added here by JS -->
        <div id="voice-settings" class="voice-selector-container"></div>
    </div>

    <!-- Status Display -->
    <div class="status" id="status"></div>
    <script src="static/script.js"></script>

    <!--Emergency resources panel-->
    <div id="emergency-resources" class="safety-alert-container" style="display: none;">
        
        <div class="safety-alert">
            <h2>‚ö†Ô∏è You're not alone - help is available right now.</h2>
            <h3>Immediate Help Resources:</h3>
            <ul>
                <li>National Suicide Prevention Lifeline: <a href="tel:112">112</a> (US)</li>
                <li>Crisis Text Line: Text on 14416 (IN)</li>
                <li>Local Emergency: <a href="tel:112">112</a> (IN)</li>
            </ul>

            <div class="emergency-contacts">
                <button class="emergency-button" onclick="window.open('tel:112')">
                    Call 112 Suicide Hotline (IN)
                </button>
                
                <button class="emergency-button" onclick="window.open('https://www.befrienders.org')" 
                        style="background-color: #3385ff;">
                    International Help
                </button>

                <button onclick="hideEmergencyResources()">I didn't mean that</button>
            </div>
            
            <p>Your life matters ‚ù§Ô∏è Please reach out.</p>
        </div>
    </div>

    <script src="static/music-player.js"></script>

</body>
</html>
